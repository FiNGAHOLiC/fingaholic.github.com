<!doctype html>
<html class="no-js" lang="ja">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="All doggs wanna be a Geek">
	<meta property="og:locale" content="ja_JP">
	<meta property="og:title" content="gruntをインストールする - Windows Vista | jekylog">
	<meta property="og:type" content="website">
	<meta property="og:url" content="http://fingaholic.github.com/posts/2012-05-01-grunt.html">
	<meta property="og:image" content="http://fingaholic.github.com/img/logo1.png">
	<meta property="og:site_name" content="jekylog">
	<meta property="og:description" content="cssだけじゃなくなんならjsも圧縮したくなったのでなんか良いツールないかなと探してたらgruntなるものが良さ気なので会社のWindowsに入れてみた。">
	<meta property="fb:app_id" content="414280305262678">
	<title>gruntをインストールする - Windows Vista | jekylog</title>
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="alternate" href="/atom.xml" type="application/rss+xml" title="jekylog">
	<link rel="stylesheet" href="/css/all.min.css">
	<script src="/js/modernizr-2.5.3.min.js"></script>
	<script>if(!Modernizr.mq('only all')) Modernizr.load('/js/respond.min.js');</script>
	<script src="//typesquare.com/accessor/script/typesquare.js?4K0leOFaobI%3D"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/all.min.js"></script>
</head>

	<body>
		<div class="area-body">
			<header class="area-header">
	<div class="mod-header">
		<hgroup>
			<h1><a href="/">jekylog</a></h1>
			<h2>All doggs wanna be a Geek</h2>
		</hgroup>
	</div>
	<div class="mod-gnavi">
		<nav>
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/archive.html">Archive</a></li>
				<li><a href="/about.html">About</a></li>
			</ul>
		</nav>
	</div>
</header>

			<div class="area-main"><article class="mod-postdetail">
	<header>
		<p><time datatime="01 May 2012">01 May 2012</time></p>
		<h1>gruntをインストールする - Windows Vista</h1>
	</header>
	<section class="mod-postmain"><p><strong>ちなみにMacも下記とほとんど相違ないけど<a href='/posts/2012-05-02-grunt.html' title='gruntをインストールする（Mac OSX Lion）'>ハマった</a>んで一応メモってる</strong></p>

<p>gruntそのものはtakazudoさんの<a href='http://hamalog.tumblr.com/post/18137176043/grunt-js-css' title='gruntで快適JS/CSSビルド生活 - hamalog'>hamalog</a>で知ってたけどなかなかどういう場面で必要になるか分からなかったので手を付けれなかったけど、実現したい事の解決方法としてマッチしたので参考にさせてもらいながらgruntをインストールしてみた。</p>

<h1 id='nodejsnpm'>node.jsとnpmをインストール</h1>

<p>ネットの情報ではnpmをWindowsで使うには結構手法が違ってたりしてたけど<a href='http://www.koikikukan.com/archives/2012/01/10-015555.php' title='Windowsを使ってNode.js+Socket.IOを試してみました。'>小粋空間</a>さんによると<a href='http://nodejs.org/#download' title='node.js'>公式のパッケージ</a>をインストールすればデフォで入ってるっぽい。</p>

<blockquote>
<p>「npm」という、Node.js用のパッケージマネージャも一緒にインストールされており（ネットで調べると以前は別にインストールする必要があったようですが不要）、同じフォルダにある「npm.cmd」が該当します。</p>
</blockquote>

<p>ちなみにコマンドプロンプトで</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>としても起動しなかったので環境変数のPathに「C:\Users\ユーザー名\AppData\Roaming\npm;C:\Program Files\nodejs\」を追加すると無事起動できた。</p>

<h1 id='grunt'>gruntをインストール</h1>

<p>コマンドプロンプトで、</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>とするだけ。楽チン。</p>

<h1 id='grunt'>gruntを使う。</h1>

<p>公式サイトを見ながらやってみた。どうやらプロジェクトとなるディレクトリ直下にgrunt.jsを設置してそこ色々設定を書いていくらしい。<code class='inline'>grunt init:gruntfile</code>で生成出来るけどイミフな設定が多々あったので自分で作ってみるのがいいかも。ちなみにラッパー関数内に設定を記述していく。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p><strong>※ちなみに以後のコードは上記ラッパーを省略して書くが必ず必要なので注意。</strong><br /><strong>※CSSプログラマーの神様に<a href='https://twitter.com/GeckoTang/status/233840285820518400' title='指摘'>指摘</a>された箇所を修正</strong></p>

<h1 id='js'>jsを結合してみる</h1>

<p>concatなるビルトインタスクがあるので<a href='https://github.com/cowboy/grunt/blob/master/docs/task_concat.md' title='grunt/docs/task_concat.md at master ・ cowboy/grunt'>公式</a>見ながらやってみる。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>早速コマンドラインで下記を叩いてみる。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>おお、吐き出されている！今まではmodernizr.load使ってたけどこれからはリソース削減のためにこれでいってみよう。</p>

<h1 id='jsminify'>jsをminifyする</h1>

<p>結合出来ればあとはminifyもしたい。これもminなるビルトインタスクがあるので<a href='https://github.com/cowboy/grunt/blob/master/docs/task_min.md' title='grunt/docs/task_min.md at master ・ cowboy/grunt'>公式</a>見ながらやってみる。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>で、例のごとく下記を叩く。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p><strong>13348bytesから7383bytes</strong>まで圧縮出来た。</p>

<h1 id='sass'>sassも監視してみる</h1>

<p>これなかなか検索しても出て来なかったけどtakazudoさんの<a href='https://github.com/Takazudo/takazudo.github.com/blob/master/_blogsrc/grunt.js' title='takazudo.github.com/_blogsrc/grunt.js at master ・ Takazudo/takazudo.github.com'>github</a>を見ながらやってみた。どうやら自分で<a href='https://github.com/cowboy/grunt/blob/master/docs/types_of_tasks.md#custom-tasks' title='grunt/docs/types_of_tasks.md at master ・ cowboy/grunt'>カスタムタスク</a>を作って登録すればよさそう。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>で、肝心のタスクはsass.jsとしてtasksディレクトリ以下に格納。ほとんど<a href='https://github.com/Takazudo/takazudo.github.com/blob/master/_blogsrc/tasks/sass.js' title='takazudo.github.com/_blogsrc/tasks/sass.js at master ・ Takazudo/takazudo.github.com'>takazudoさんの</a>を<del>パク</del>参考にさせてもらいました。下記がtasks/sass.js内の記述。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>いざコマンドを叩いてみる。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>キタコレ。無事変換できてた。</p>

<h1 id='css'>cssを圧縮する</h1>

<p>圧縮はsassコマンドに&#8211;styleオプションを付けても良かったけどjsのように別途設けた方がよさそうなのでこれまた<a href='https://github.com/Takazudo/takazudo.github.com/blob/master/_blogsrc/tasks/cssmin.js' title='takazudo.github.com/_blogsrc/tasks/cssmin.js at master ・ Takazudo/takazudo.github.com'>takazudoさんの</a>を<del>パク</del>参考にさせてもらいました。ちなみにNodeベースのCSSコンプレッサーである<a href='https://github.com/ded/sqwish' title='ded/sqwish'>sqwish</a>なるものが必要なのでインストールしておく。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>インストール出来れば早速設定に。sassとほとんど一緒。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>tasks/cssmin.js内は下記。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>いざコマンドを叩いてみる。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='id26'>デフォルトタスクの登録</h1>

<p>その他のビルドツールのように<code class='inline'>grunt</code>とコマンドするだけで実行されるdefaultタスクを設定しておくには下記のようにする。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='watch'>全体の変更をwatchで監視</h1>

<p>watchなるビルトインタスクがある。あんまり詳しい解説はなかったけどfilesに監視したいファイル、tasksにタスクを指定するっぽい。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>下記で実行出来る。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>とりあえず今はまだこれくらいしか分からないけどそれでも十分使えそう。<br />Windows、Mac共に動作するのがとてもいい。<br />これからは案件ベースで作業する時のディレクトリルールとか決めていきたい。</p></section>
</article>
<div class="mod-socialbutton">
	<div class="tw-like"><a href="https://twitter.com/share" class="twitter-share-button" data-via="FiNGAHOLiC" data-lang="ja">ツイート</a></div>
	<div class="fb-like" data-send="false" data-layout="button_count" data-show-faces="false" data-font="verdana"></div>
</div>


	<div class="mod-pagenation">
		
			<div class="prev"><a href="/posts/2012-04-30-python.html">&#171; Previous Entry</a></div>
		
		
			<div class="next"><a href="/posts/2012-05-02-grunt.html">Next Entry &#187;</a></div>
		
	</div>

</div>
			<footer class="area-footer">
	<div class="mod-footer">
		<p><small>Copyright &#xA9; 2012 fingaholic</small></p>
	</div>
</footer>

		</div>
		<script type="text/javascript">
	var _gaq = _gaq || [['_setAccount', 'UA-30944384-1'], ['_trackPageview']];
	(function(d, t){
		var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
		g.async = true;
		g.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g, s);
	})(document, 'script');
</script>


		<div id="fb-root"></div>
		<div class="mod-github"><a href="http://github.com/fingaholic"><img src="https://a248.e.akamai.net/camo.github.com/5d21241b64dc708fcbb701f68f72f41e9f1fadd6/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a></div>
	</body>
</html>
