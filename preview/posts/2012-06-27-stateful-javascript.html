<!doctype html>
<html class="no-js" lang="ja">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="All doggs wanna be a Geek">
	<meta property="og:locale" content="ja_JP">
	<meta property="og:title" content="ステートフルJavaScript 1章 | jekylog">
	<meta property="og:type" content="website">
	<meta property="og:url" content="http://fingaholic.github.com/posts/2012-06-27-stateful-javascript.html">
	<meta property="og:image" content="http://fingaholic.github.com/img/logo1.png">
	<meta property="og:site_name" content="jekylog">
	<meta property="og:description" content="ステートフルJavaScript1章の備考録、っていうか写経。">
	<meta property="fb:app_id" content="414280305262678">
	<title>ステートフルJavaScript 1章 | jekylog</title>
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="alternate" href="/atom.xml" type="application/rss+xml" title="jekylog">
	<link rel="stylesheet" href="/css/all.min.css">
	<script src="/js/modernizr-2.5.3.min.js"></script>
	<script>if(!Modernizr.mq('only all')) Modernizr.load('/js/respond.min.js');</script>
	<script src="//typesquare.com/accessor/script/typesquare.js?4K0leOFaobI%3D"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/all.min.js"></script>
</head>

	<body>
		<div class="area-body">
			<header class="area-header">
	<div class="mod-header">
		<hgroup>
			<h1><a href="/">jekylog</a></h1>
			<h2>All doggs wanna be a Geek</h2>
		</hgroup>
	</div>
	<div class="mod-gnavi">
		<nav>
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/archive.html">Archive</a></li>
				<li><a href="/about.html">About</a></li>
			</ul>
		</nav>
	</div>
</header>

			<div class="area-main"><article class="mod-postdetail">
	<header>
		<p><time datatime="27 Jun 2012">27 Jun 2012</time></p>
		<h1>ステートフルJavaScript 1章</h1>
	</header>
	<section class="mod-postmain"><h1 id='11_javascript'>1.1 初期のJavaScript</h1>

<blockquote>
<p>JavaScriptが強力で動的なオブジェクト指向言語である</p>
</blockquote>

<p>これって議論が分かれるところだけど書籍では<strong>オブジェクト指向言語</strong>と言い切っている。</p>

<h1 id='12_'>1.2 アプリケーションの構造化</h1>

<blockquote>
<p>大規模なjavaScriptアプリケーションを作成する上で鍵になるのは、「javaScriptの」アプリケーションをつくろうとはしないことです。まず、独立性の高いコンポーネントへとアプリケーションを分割するべきです。</p>
</blockquote>

<p>粒度が細かいほうが制作しやすいし管理もしやすいと。</p>

<h1 id='13_mvc'>1.3 MVCとは</h1>

<blockquote>
<p>MVCはデザインパターンの1つであり、アプリケーションをデータ（Model）とプレゼンテーションレイヤ（View）そしてユーザーインタラクションレイヤ（Controller）の3つに分割するという概念です。</p>
</blockquote>

<p>大抵のWEBアプリケーションはこう分割できるよねと。</p>

<blockquote>
<p>1. ユーザーがアプリケーションを操作します。<br />2. コントローラが持つイベントハンドラが呼び出されます。<br />3. コントローラがモデルに対してデータを要求し、受け取ったデータをビューに渡します。<br />4. ビューがデータを表示します。</p>
</blockquote>

<p>図にすると下記のリンク先の用な感じ？</p>

<ul>
<li><a href='http://f.hatena.ne.jp/kazuk_i/20110407073430' title='f:id:kazuk_i:20110407073430p:image'>f:id:kazuk_i:20110407073430p:image</a></li>
</ul>

<h2 id='131_'>1.3.1 モデル</h2>

<blockquote>
<p>モデルとは、アプリケーションのデータオブジェクトが格納される場所を意味します。</p>
</blockquote>

<p>TwitterからTweet引っ張ってきてゴニョゴニョって場合だとTweetデータって感じか。</p>

<blockquote>
<p>モデルはビューやコントローラについて全く関知しません。</p>
</blockquote>

<p>いわゆる疎結合ってやつですね。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記はダメな例。<br />destroyUserが名前空間で保護されていない（グローバル関数になっている）ので、<br />同じ名前の関数があったら競合してしまう。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記は良い例。<br />destroy関数はUserインスタンスを通じて名前空間が限定されている。<br />また、継承できるので全てのモデルで関数を定義する必要もない。</p>

<h2 id='132_'>1.3.2 ビュー</h2>

<blockquote>
<p>ビューのレイヤはユーザーへの表示に相当し、ユーザーはこれに対してインタラクションを行います。<br />JavaScriptアプリケーションでのビューは大部分がHTMLとCSSそしてJavaScriptテンプレートによって構成されます。</p>
</blockquote>

<p>ビューもモデルと同様他の部分から切り離されているべきだと。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記はダメな例。<br />formatDate関数をビューの中に記述しているので保守が困難。</p>

<p>javascript</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>html</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記は良い例。 helperという名前空間で保護されているし、ロジックを外部に隔離出来ている。</p>

<h2 id='133_'>1.3.3 コントローラ</h2>

<blockquote>
<p>モデルとビューを結びつける役割を果たしているのがコントローラです。コントローラはビューからイベントや入力データを受け取り、これらを処理（モデルが呼び出されることもあります）し、その結果に基づいてビューを更新します。ページの読み込み時に、コントローラはビューに対してイベントハンドラを追加します。</p>
</blockquote>

<p>仲介するだけでやっぱりコントローラも分離してる。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>これちょっと分からんかった。匿名関数いるのかな？jQuery用？nameClickって匿名関数無くてもプライベートになってる気がするけど。</p>

<h1 id='14_'>1.4 モジュール性のためのクラス設計</h1>

<p>JavaScriptのクラスやイベント等の基本的な概念をおさらい。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>慣習的にコンストラクタ関数の先頭は大文字に、必ずnew演算子と組み合わせて呼び出す。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記は新しいクラスをセットアップするための関数。<br />今後これをペースにクラスライブラリを作るみたい。</p>

<h1 id='15_'>1.5 クラスへの関数の追加</h1>

<h2 id='id31'>クラス関数</h2>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h2 id='id32'>インスタンス関数</h2>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h2 id='prototype'>prototypeのエイリアスを使う</h2>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='16_'>1.6 クラスライブラリへのメソッドの追加</h1>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>クラスライブラリにクラスプロパティを追加するextend関数と、<br />インスタンスプロパティを追加するinclude関数を追加。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記がextend関数の使用例。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記がinclude関数の使用例。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記がコールバック（拡張が行われた時点で呼ばれる）の使用例。</p>

<h1 id='17_'>1.7 プロトタイプを使ったクラスの継承</h1>

<blockquote>
<p>JavaScriptはプロトタイプベースの言語であり、（クラスとインスタンスを区別するのではなく）プロトタイプすなわち原型というオブジェクトの概念を持ちます。プロトタイプオブジェクトとは、新しく生成されるオブジェクトに対して初期プロパティを与えるテンプレートのような役割を果たします。</p>
</blockquote>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='18_'>1.8 クラスライブラリに継承を追加する</h1>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>ちなみに__proto__にブラウザ間の互換性が無いので注意。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='19_'>1.9 関数呼び出し</h1>

<h2 id='apply'>apply関数</h2>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h2 id='call'>call関数</h2>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h2 id='jqueryproxy'>元のコンテキストを保持する関数（jQueryなら$.proxy()）</h2>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>この辺りは下記参考リンクが分かりやすい。</p>

<ul>
<li><a href='http://ginpen.com/2011/12/15/apply/' title='Ginpen.com | 他人の能力を自分のものにできる .apply()で高度な成り済ましを'>Ginpen.com | 他人の能力を自分のものにできる .apply()で高度な成り済ましを</a></li>
</ul>

<h1 id='110_'>1.10 有効範囲を制限する</h1>

<p>クラスライブラリにproxy関数を追加。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>下記使用例。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>ちなみにES5ならbindが使える。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>古いブラウザ用のbindフォールバック</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>下記参考リンク。</p>

<ul>
<li><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind' title='bind - MDN'>bind - MDN</a></li>

<li><a href='https://github.com/kriskowal/es5-shim/' title='kriskowal/es5-shim ・ GitHub'>kriskowal/es5-shim ・ GitHub</a></li>
</ul>

<h1 id='111_'>1.11 プライベート関数の追加</h1>

<blockquote>
<p>多くの開発者が、プライベートなプロパティには名前の先頭にアンダースコア（_）を付けるという対策だけで済ませてしまっています。今後状況は変わるかもしれませんが、アンダースコアによってそのプロパティがプライベートなAPIの一部であることが表明されてます。しかしこのアプローチは醜悪であり、筆者はこれを利用するつもりはありません。</p>
</blockquote>

<p>ちょっとしたサイトなら工数の都合もあるからいいと思うけどWEBアプリではご法度。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>上記ではfindById関数がプライベートになっている。</p>

<h1 id='112_'>1.12 その他のクラスライブラリ</h1>

<p>Spineってクラスライブラリもあるんすか。</p>

<h1 id='1'>1章で制作したクラスライブラリ</h1>

<p>Liquid error: No such file or directory - posix_spawnp</p></section>
</article>
<div class="mod-socialbutton">
	<div class="tw-like"><a href="https://twitter.com/share" class="twitter-share-button" data-via="FiNGAHOLiC" data-lang="ja">ツイート</a></div>
	<div class="fb-like" data-send="false" data-layout="button_count" data-show-faces="false" data-font="verdana"></div>
</div>


	<div class="mod-pagenation">
		
			<div class="prev"><a href="/posts/2012-05-11-develop.html">&#171; Previous Entry</a></div>
		
		
			<div class="next"><a href="/posts/2012-07-02-stateful-javascript.html">Next Entry &#187;</a></div>
		
	</div>

</div>
			<footer class="area-footer">
	<div class="mod-footer">
		<p><small>Copyright &#xA9; 2012 fingaholic</small></p>
	</div>
</footer>

		</div>
		<script type="text/javascript">
	var _gaq = _gaq || [['_setAccount', 'UA-30944384-1'], ['_trackPageview']];
	(function(d, t){
		var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
		g.async = true;
		g.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g, s);
	})(document, 'script');
</script>


		<div id="fb-root"></div>
		<div class="mod-github"><a href="http://github.com/fingaholic"><img src="https://a248.e.akamai.net/camo.github.com/5d21241b64dc708fcbb701f68f72f41e9f1fadd6/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a></div>
	</body>
</html>
