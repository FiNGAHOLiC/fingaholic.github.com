<!doctype html>
<html class="no-js" lang="ja">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width">
	<meta name="description" content="All doggs wanna be a Geek">
	<meta property="og:locale" content="ja_JP">
	<meta property="og:title" content="FacebookのLikeボタンを設置する | jekylog">
	<meta property="og:type" content="website">
	<meta property="og:url" content="http://fingaholic.github.com/posts/2012-04-26-facebook.html">
	<meta property="og:image" content="http://fingaholic.github.com/img/logo1.png">
	<meta property="og:site_name" content="jekylog">
	<meta property="og:description" content="このブログに設置するために久々に弄ってみたら相変わらずIEでエラー出まくるし一苦労したんでメモ。">
	<meta property="fb:app_id" content="414280305262678">
	<title>FacebookのLikeボタンを設置する | jekylog</title>
	<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
	<link rel="alternate" href="/atom.xml" type="application/rss+xml" title="jekylog">
	<link rel="stylesheet" href="/css/all.min.css">
	<script src="/js/modernizr-2.5.3.min.js"></script>
	<script>if(!Modernizr.mq('only all')) Modernizr.load('/js/respond.min.js');</script>
	<script src="//typesquare.com/accessor/script/typesquare.js?4K0leOFaobI%3D"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="/js/all.min.js"></script>
</head>

	<body>
		<div class="area-body">
			<header class="area-header">
	<div class="mod-header">
		<hgroup>
			<h1><a href="/">jekylog</a></h1>
			<h2>All doggs wanna be a Geek</h2>
		</hgroup>
	</div>
	<div class="mod-gnavi">
		<nav>
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/archive.html">Archive</a></li>
				<li><a href="/about.html">About</a></li>
			</ul>
		</nav>
	</div>
</header>

			<div class="area-main"><article class="mod-postdetail">
	<header>
		<p><time datatime="26 Apr 2012">26 Apr 2012</time></p>
		<h1>FacebookのLikeボタンを設置する</h1>
	</header>
	<section class="mod-postmain"><p><strong>下記でもいいけどjQuery使ってるなら<a href='/posts/2012-04-29-likebutton.html' title='mixi、twitter、facebookのLikeボタンを設置する'>最新記事の方法</a>のがいいかも。</strong></p>

<p><strong>また、下記コードはHTML5のコード内に埋め込む事が前提で、IE7以上での表示を想定しており、FacebookのLikeボタンはIE6だと「Permission denied」エラーが出るので、IE6にも対応させたい場合はiframeにする必要がある。</strong></p>

<h1 id='id20'>まずは公式サイトへ</h1>

<p>下記よりお好みのボタンを生成出来る。</p>

<ul>
<li><a href='https://developers.facebook.com/docs/reference/plugins/like/' title='Like Button - Facebook Developers'>Like Button - Facebook Developers</a></li>
</ul>

<ol>
<li>「URL to Like」は設置されたページのURLを取って欲しいから空にした。</li>

<li>「Send Button (XFBML Only)」不要なのでチェックを外した。</li>

<li>「Layout Style」は「standard」を選択。</li>

<li>「Width」はとりあえずデフォルト値の「450」のまま。</li>

<li>「Show Faces」は不要なのでチェックを外した。</li>

<li>「Verb to display」は「like」を選択。</li>

<li>「Color Scheme」は「light」。</li>

<li>「Font」は「lucida grande」。</li>
</ol>

<p>するとプラグインコード、HTML5、XFBML、IFRAMEの3種類からプラグインコードを選択できるので今回はHTML5を選択した。</p>

<h1 id='id21'>実際に設置する</h1>

<h2 id='javascript_sdk'>JavaScript SDKの読み込み</h2>

<p>一度だけjavaScript SDK（Facebook APIを利用するためのJavaScript）をbodyタグの直後に挿入して読み込む。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h2 id='id22'>ボタンのコードを設置</h2>

<p>次のコードをボタンを設置したい場所に設置する。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>とまあこれだけで設置自体は簡単に出来る。<br />ただHTMLの中にscriptタグがあるのも気持ち悪いんでこれをまずはどうにかしたい。</p>

<h1 id='scriptjs'>scriptタグを外部jsに移動する</h1>

<p>どうやらid付きのscriptタグを吐き出しているだけなのでDOMContentLoaded（onload後でもまあ可）後に実行すれば問題なさげ。外部jsには下記の様に設置した。それなりの設定をしてたら即時関数にする必要もないけど見やすいからこのまま。<strong>ちなみにdiv#fb-rootはSDKで使用するのでbodyタグ直下に残しておくこと。仮に該当要素がない場合は自動で挿入されるので問題はないけど。</strong></p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='ogp'>OGPの設定をする</h1>

<p>忘れがち。基本的には下記を参考にしながら設定しておくとスムーズ。<br /><strong>ちなみにアプリIDを取得しなくても（fb:app_idじゃなく）ページを管理するFacebookユーザーID（fb:admins）でもいいらしい。その場合は上記jsコードのアプリ部分のクエリは要らないかも（未確認）。</strong></p>

<ul>
<li><a href='http://www.html5-memo.com/facebook/iine111216/' title='facebook いいねボタンの仕様変更?OGPの設定についてまとめました'>facebook いいねボタンの仕様変更?OGPの設定についてまとめました</a></li>

<li><a href='http://www.misclog.com/socialmedia/98/' title='サイトにFacebookのいいねボタンとOGPを導入してみる'>サイトにFacebookのいいねボタンとOGPを導入してみる</a></li>
</ul>

<h1 id='id23'>クリック時のポップアップを消したい。</h1>

<p>こいつが邪魔なので消したい。特にレイアウトによっては不要なケースも多々あると思う。<br />単純にポップアップのセレクタにdisplay:none;してやれば消える（!importantは必須）。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='id24'>レスポンシブとかの場合に幅を変えたい</h1>

<p>デフォルトの幅は450pxなのでブラウザの幅を縮めたりiPhoneで見ると横スクロールバーが出てうざい。ライクボタン自体の最小の幅っていうのはブラウザ間でまちまちなところもあったりボタンレイアウトによっても変わってくるのでこれは確認しながらちょこちょこ設定しなければならないのかも。とりあえずレスポンシブ時の最小幅は260pxくらいとこのブログでは設定してるので下記を設定しておいた。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<h1 id='ie'>IEでブラウザを縮小すると横スクロールバーが出る</h1>

<p>980pxのサイトとかならいいけどレスポンシブ対応とかしてると謎のスクロールバーが出る。<br />調べてみるとどうやら先述したdiv#rootが原因っぽいのでこいつを非表示にした。</p>

<p>Liquid error: No such file or directory - posix_spawnp</p>

<p>ただ公式には下記のように推奨はされてないのでこの辺は自己責任でやったほうが良い。<br />ってかそもそもIEでエラー出まくってるのに何を言ってるんだという感じだけども。</p>

<blockquote>
<p>The fb-root element must not be hidden using display: none or visibility: hidden, or some parts of the SDK will not work properly in Internet Explorer.</p>
</blockquote>

<ul>
<li><a href='https://developers.facebook.com/docs/reference/javascript/' title='JavaScript SDK - Facebook'>JavaScript SDK - Facebook</a></li>
</ul>

<h1 id='ie'>IEでエラーが出まくる</h1>

<p>今のとこちょっと原因は不明。調べてるとGoogle Analyticsとバッティングしてるとか色々出てきたのでもうちょっと調査してみる。</p>

<p><strong>iframeかXFBMLならIEでエラーが出ないっぽい。HTML5の埋め込みだとダメなのか？<del>ちなみにうちのブログはIE7以下はLikeボタン読み込まないようにした。</del></strong></p></section>
</article>
<div class="mod-socialbutton">
	<div class="tw-like"><a href="https://twitter.com/share" class="twitter-share-button" data-via="FiNGAHOLiC" data-lang="ja">ツイート</a></div>
	<div class="fb-like" data-send="false" data-layout="button_count" data-show-faces="false" data-font="verdana"></div>
</div>


	<div class="mod-pagenation">
		
			<div class="prev"><a href="/posts/2012-04-25-terminal.html">&#171; Previous Entry</a></div>
		
		
			<div class="next"><a href="/posts/2012-04-29-likebutton.html">Next Entry &#187;</a></div>
		
	</div>

</div>
			<footer class="area-footer">
	<div class="mod-footer">
		<p><small>Copyright &#xA9; 2012 fingaholic</small></p>
	</div>
</footer>

		</div>
		<script type="text/javascript">
	var _gaq = _gaq || [['_setAccount', 'UA-30944384-1'], ['_trackPageview']];
	(function(d, t){
		var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
		g.async = true;
		g.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		s.parentNode.insertBefore(g, s);
	})(document, 'script');
</script>


		<div id="fb-root"></div>
		<div class="mod-github"><a href="http://github.com/fingaholic"><img src="https://a248.e.akamai.net/camo.github.com/5d21241b64dc708fcbb701f68f72f41e9f1fadd6/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a></div>
	</body>
</html>
